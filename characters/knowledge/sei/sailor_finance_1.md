# Welcome to Sailor Finance

An on-chain native DEX powering the evolution of DeFi

**Sailor ("Say-lor") is a trader's oasis in the bustling world of Decentralized Finance (DeFi) on Sei Network, offering a comprehensive and user-friendly Decentralized Exchange (DEX) experience.**

Sailor is the cornerstone DEX for Sei Network, offering seamless trading, discretized liquidity, and real yield all within his intuitive and easy-to-navigate platform. It is a distinct and purpose-built native DEX for the Sei Network, with unique features and offerings tailored specifically to serve the Ecosystem. Backed by the strong support from the Sei Foundation and its partners, Sailor's strives to serve as the central trading and liquidity hub in the Ecosystem.

<figure><img src="https://3593746478-files.gitbook.io/~/files/v0/b/gitbook-x-prod.appspot.com/o/spaces%2F6oqly9k0TMVvzV9AsPsg%2Fuploads%2Fk3hDdTVcw36zsY0BxH0T%2Fimage.png?alt=media&#x26;token=d472706f-014b-4fc7-b2e8-987fa0bf6271" alt=""><figcaption></figcaption></figure>

Step into Sailor's bustling portside exchange and navigate through a sea of opportunities on Sei Network: trade a diverse array of tokens, delve into the rewarding waters of yield farming, and explore the limitless potential of Concentrated Liquidity. With a vision of becoming the liquidity hub at the center of Sei's innovative ecosystem, Sailor is where the complex world of DeFi becomes accessible to anyone and everyone.

### Traders <a href="#an-exchange-without-borders" id="an-exchange-without-borders"></a>

**Swift Trades, Fair Prices, and a Smooth Experience â€” this is a guarantee when coming to Sailor's exchange.**

At Sailor, swapping tokens is as simple as exchanging goods in the old bazaars, but with the speed and efficiency of modern magic â€” smart contracts. Our Concentrated Liquidity Market Maker ("CLMM") is the genie that fulfils your trade wishes, ensuring you get the best value for your tokens with every exchange.

### Liquidity Providers

**Put your tokens to work and earn efficient yield with Sailor.**

Why let your tokens gather dust when they can earn their keep instead? At Sailor, your tokens can be staked in various liquidity pools, collecting a share of the trading fees from traders on Sailor. Sailor's Concentrated Liquidity pools allow for custom LP positions at specific prices, ensuring higher capital efficiency of your assets. From the safety of stablecoins to the thrill of volatile assets, there's a place for everyone in the Sailors market.

### Ecosystem Incentives

**Harvest more than just trading yield with Sailor's incentives.**

Sailor is not just about the usual trade; it's about the extra bounty. Partnering with a voyage of ecosystem allies, find offers for additional tokens as a reward for your liquidity. These special deals are limited in time, so be swift to seize them!

### $SPINACH Token

**SPINACH token is the utility for the Sailor ecosystem....more details on TGE soon ðŸ”´**

# Getting Started

Onboarding guides and FAQs cooking......ðŸ”´

# Traders

# Swap Trades

### How to Swap

1. Begin by accessing the [Swap ](https://sailor.finance/swap?inputMint=0x3894085ef7ff0f0aedf52e2a2704928d1ec074f1&outputMint=0x0000000000000000000000000000000000000000)feature through the app's navigation tabs, then link your wallet.\\

   <figure><img src="https://3593746478-files.gitbook.io/~/files/v0/b/gitbook-x-prod.appspot.com/o/spaces%2F6oqly9k0TMVvzV9AsPsg%2Fuploads%2Ffd4WR4wiMQLO0wpygZUh%2Fimage.png?alt=media&#x26;token=d80bb9bd-685a-47fd-ba43-840cdbef3175" alt=""><figcaption></figcaption></figure>

2. Select the tokens you wish to exchange from the provided drop-down menus. In this illustration, we'll exchange your USDC for SEI.\\

   <figure><img src="https://3593746478-files.gitbook.io/~/files/v0/b/gitbook-x-prod.appspot.com/o/spaces%2F6oqly9k0TMVvzV9AsPsg%2Fuploads%2Fy6jFIwUBoOEK9asRlmCV%2Fimage.png?alt=media&#x26;token=d4aedcbb-4c8a-4129-8673-e15c6d5048d6" alt=""><figcaption></figcaption></figure>

3. Specify the quantity of tokens you want to swap. Once ready, hit the Swap button!
4. After the transaction is verified, your updated balance should appear, though it might take a moment to refresh. Congrats on completing your first swap on Sailor. Time to explore more swapping options!

<figure><img src="https://3593746478-files.gitbook.io/~/files/v0/b/gitbook-x-prod.appspot.com/o/spaces%2F6oqly9k0TMVvzV9AsPsg%2Fuploads%2F9BlHl0QdHizbD4BvVhBI%2Fimage.png?alt=media&#x26;token=27b82fc3-3e85-4037-9bd8-199dfd531665" alt=""><figcaption></figcaption></figure>

<mark style="background-color:yellow;">Note: Pay close attention to Price Impact and remember to check 'Minimum Received' when executing large swaps or when swapping in a low liquidity pool.</mark>\\

- **Minimum Received** refers to the smallest quantity of tokens a user is guaranteed to obtain from a trade.
- **Price Impact** represents the variance between the current market price and the projected execution price, which is affected by the trade's volume.&#x20;
- **Slippage Tolerance** denotes the maximum allowable difference between your expected price and the actual execution price. You can find this setting by either clicking "settings" in the navigation menu or selecting "more information" on the swap screen.

# Liquidity Providers

# Provide Concentrated Liquidity ("CLMM")

## How to provide liquidity in a Concentrated Liquidity pool <a href="#how-to-provide-liquidity-in-a-concentrated-liquidity-pool" id="how-to-provide-liquidity-in-a-concentrated-liquidity-pool"></a>

1. Access the [Liquidity](https://sailor.finance/liquidity-pools) tab from the top navigation menu.

2. After connecting your wallet, either locate the desired pool and select 'Create Position' from the drop-down, or click 'Create Position' at the top of the interface.\\

   <figure><img src="https://3593746478-files.gitbook.io/~/files/v0/b/gitbook-x-prod.appspot.com/o/spaces%2F6oqly9k0TMVvzV9AsPsg%2Fuploads%2Fork8Q0WoosQDs55p5cRs%2Fimage.png?alt=media&#x26;token=5cf62f04-b485-40b5-a29f-40bc4612057b" alt=""><figcaption></figcaption></figure>

3. Set the price range using one of these methods:

   - Adjust the sliders on the graph
   - Manually input the minimum and maximum prices
   - Use the + and - buttons
   - **Note**: You can switch the price base token in the upper right corner of the window when choosing the price range. For instance, you can view the price as USDC/SEI or SEI/USDC.\\

   <figure><img src="https://3593746478-files.gitbook.io/~/files/v0/b/gitbook-x-prod.appspot.com/o/spaces%2F6oqly9k0TMVvzV9AsPsg%2Fuploads%2F6PrqAXVD7FxD9aAG7QP6%2Fimage.png?alt=media&#x26;token=4f47d6bd-9733-4e0a-a42e-5ea99926049f" alt=""><figcaption></figcaption></figure>

4. Input the deposit amounts for each token. Remember, the amounts must align with the deposit ratio displayed, which is determined by the selected price range.\\

5. Click 'Preview', review the position details carefully, then select 'Confirm Deposit'.\\

   <figure><img src="https://3593746478-files.gitbook.io/~/files/v0/b/gitbook-x-prod.appspot.com/o/spaces%2F6oqly9k0TMVvzV9AsPsg%2Fuploads%2F2t61M4C9CDtiaFEnSnZ1%2Fimage.png?alt=media&#x26;token=4aaa437c-beed-40a1-864e-3c80a83c97ac" alt=""><figcaption></figcaption></figure>

6. Done! A NFT representing your position will now be visible in your wallet.\\

   <figure><img src="https://3593746478-files.gitbook.io/~/files/v0/b/gitbook-x-prod.appspot.com/o/spaces%2F6oqly9k0TMVvzV9AsPsg%2Fuploads%2FrcvAgOvtwoK68yxgKgls%2Fimage.png?alt=media&#x26;token=e7ca6d9c-3e27-470a-abfb-e355fa4928b1" alt=""><figcaption></figcaption></figure>

\
**IMPORTANT:** If an NFT is lost, sold or burnt, the liquidity it represents will also be lost!\\

To review or manage a position, click [Portfolio](https://sailor.finance/portfolio). Basic details can be seen in the pool drop-down menu. For more comprehensive information, select 'Manage'.&#x20;

You can add or remove liquidity from an existing position. However, to modify the price range, you'll need to establish a new position.

<figure><img src="https://3593746478-files.gitbook.io/~/files/v0/b/gitbook-x-prod.appspot.com/o/spaces%2F6oqly9k0TMVvzV9AsPsg%2Fuploads%2FA7BmBxb5tNhumPXXPfpB%2Fimage.png?alt=media&#x26;token=b21b8a8a-303d-45c7-ac06-074f8f24f196" alt=""><figcaption></figcaption></figure>

# Understanding Concentrated Liquidity

### What is Concentrated Liquidity

Concentrated Liquidity Market Maker ("CLMM") pools represent an advancement in decentralized exchange technology, offering enhanced capital efficiency for liquidity providers and improved trading conditions for users.

### Key Features of CLMM

**Targeted Liquidity Provision**

CLMMs allow liquidity providers to concentrate their assets within specific price ranges, unlike traditional Automated Market Maker ("AMM") pools. This focused approach enables more efficient capital deployment and potentially higher yields from trading fees.

**Trading Conditions**&#x20;

Traders benefit from deeper liquidity around current market prices, resulting in better execution and reduced slippage.

**Heightened Risk Awareness**

While CLMMs offer increased efficiency, they also magnify the effects of impermanent loss. Liquidity providers must fully comprehend these implications and actively manage their positions.

### How Price Ranges Function in CLMM

**Selective Liquidity Allocation**

Liquidity providers can select specific price ranges for their assets. Fees are earned proportionally to the share of liquidity at the current price.

**Active Position Management**

To optimize returns, liquidity providers should regularly monitor and adjust their positions to ensure they remain within active trading ranges.

**Price Movement Implications**:

- If the price moves below the minimum of a position's range, the position becomes 100% base token.
- If the price exceeds the maximum, the position converts to 100% quote token.

This mechanism accelerates the standard AMM behaviour within the selected price range, potentially leading to more pronounced effects on asset composition. Understanding these dynamics is crucial for effectively participating in and benefiting from CLMM pools.

Example: &#x20;

Alice decides to provide liquidity to a SEI/USDC pool. She sets her price range from $0.80 to $1.20 per SEI, with the current SEI price at $1.00. Alice deposits an equivalent value of 1,000 SEI and 1,000 USDC.

<details>

<summary>Scenario 1: SEI Price Remains Within Range ($0.80 - $1.20)</summary>

If the price of SEI fluctuates between $0.90 and $1.10:

1. Alice's position remains active, containing a mix of SEI and USDC.
2. The exact ratio of SEI to USDC will change as the price moves within the range.
3. Alice continues to earn trading fees proportional to her share of liquidity at the current price.
4. She may experience some impermanent loss, but it's mitigated by the concentrated nature of her position.
5. Alice's returns are potentially higher due to the concentrated liquidity and active fee generation.

</details>

<details>

<summary>Scenario 2: SEI Price Moves Below Minimum Range ($0.80)</summary>

If the price of SEI drops to $0.70:

1. Alice's position becomes 100% SEI.
2. Her initial 1,000 USDC has been completely swapped for SEI.
3. Alice now holds approximately 2428 SEI (1000 original SEI + 1000 USDC worth of SEI at $0.70).
4. Alice is no longer earning trading fees as her liquidity is inactive.
5. She experiences impermanent loss due to the price movement.

</details>

<details>

<summary>Scenario 3: Price Moves Above Maximum Range ($1.20)</summary>

If the price of SEI rises to $1.30:

1. Alice's position converts to 100% USDC.
2. Her initial 1000 SEI has been entirely swapped for USDC.
3. Alice now holds approximately 2,300 USDC (1000 original USDC + 1000 SEI worth of USDC at $1.30).
4. Alice stops earning trading fees as her liquidity is outside the active range.
5. She experiences impermanent loss, though potentially less severe than in a traditional AMM pool.

</details>

# Estimated APR Calculations

### **APR Calculations for CLMM pools** <a href="#apr-calculations-for-clmm-pools" id="apr-calculations-for-clmm-pools"></a>

In a CLMM pool, when price trades within an individual tick, fees are distributed proportionally to the liquidity provided by in-range positions. An accurate APR can be found for an individual tick based on trading volume within a time period, however, extrapolating this to all of the ticks in the pool and among multiple LPs is extremely complex. Traditional constant product pool APR calculations can not be directly applied to CLMM pools.&#x20;

> **Note: Projected returns for CLMMs should be considered as an estimate at best.**

There are **three methods for estimating APRs** for CLMM pools displayed on Sailor, each with its own calculation described in the following sections:

1. Overall Pool Estimated APR
2. Estimated APR for a user position (two methods of calculation below)
   - Delta Method
   - Multiplier Method

### Overall Pool Estimated APR

In order to estimate an overall APR for the pool, the following is assumed:&#x20;

Trading fees and emissions per block are extrapolated across all of the liquidity in the pool, including liquidity positions that are out of range. &#x20;

$$
\begin{align\*}
& \text{Where } APR = \sum(d\_{365}, h\_{24}, s\_{3600}, b\_{0.5}) \* \frac{(perBlockReward \* rewardPrice) + totalTradingFee}{totalLiquidityValue} && \\

\end{align\*}
$$

The above calculations apply to the "24hr APR" reflected on the current [Liquidity](https://sailor.finance/liquidity-pools) page\\

<figure><img src="https://3593746478-files.gitbook.io/~/files/v0/b/gitbook-x-prod.appspot.com/o/spaces%2F6oqly9k0TMVvzV9AsPsg%2Fuploads%2FN35isLIwJinL9mBX9baT%2Fimage.png?alt=media&#x26;token=b165a54a-af02-4874-a65f-5739040fe0e9" alt=""><figcaption></figcaption></figure>

### Estimated APR for Specific User Positions

#### Delta Method

The Delta Method applies the implied change (delta) in pool liquidity, as determined by a user specified position price range and size, to calculate an estimated APR.

The total amounts of each token can be calculated by using the following formulas:

$$
\begin{align\*}
& \text{If } i\_l \leq i\_c < i\_u &&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&& \\\[10pt]
& \text{Where:} \\
& i\_l = lowerTickId \\
& i\_c = currentTickId \\
& i\_u = upperTickId \\\[10pt]
& deltaY = deltaL \* (sqrt(P) - sqrt(P\_l)) \\\[10pt]
& deltaX = deltaL \* (\frac{1}{sqrt(P)} - \frac{1}{sqrt(P\_u)})
\end{align\*}
$$

For estimation of the amounts of tokenA (_deltaX_) and tokenB (_deltaY_) we need to know _deltaL_:

$$
\begin{align\*}
& (deltaY \* pUSDY) + (deltaX \* pUSDX) = targetAmount \\
& \\
& \text{So we take:} \\
& (deltaL \* (sqrt(P) - sqrt(P\_l)) \* pUSDY) + (deltaL \* (\frac{1}{sqrt(P)} - \frac{1}{sqrt(P\_u)}) \* pUSDX) = targetAmounts \\
& \\
& \text{Then:} \\
& deltaL = \frac{targetAmounts}{(sqrt(P) - sqrt(P\_l)) \* pUSDY} + (\frac{1}{sqrt(P)} - \frac{1}{sqrt(P\_u)}) \* pUSDX \\
\end{align\*}
$$

After calculating for _deltaL_, we can calculate _deltaX_ and _deltaY_ using:

$$
\begin{align\*}
& deltaY = deltaL \* (sqrt(P) - sqrt(P\_l))\\
& \\
& deltaX = deltaL \* (\frac{1}{sqrt(P)} - \frac{1}{sqrt(P\_u)}) &&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&& \\
\end{align\*}
$$

The estimated daily fee can be calculated by:

$$
\begin{align\*}
& Fee = feeTier \* volume24H \* \frac{deltaL}{L + deltaL} &&&&&&&&&&&&&&&&&&&&&&&&&&&&\\
& \\
& \text{Where:} \\
& volume24H = \text{averageof24hvolume} \\
& L = \text{total liquidity(cumulativeofliquidityNetfromallticksthati}\_l \leq ic) \\
& deltaL = \text{deltaliquidity}
\end{align\*}
$$

And can be calculated from:

$$
\begin{align\*}
& liquidityAmount0 = amount0 \* \frac{sqrt(p\_u)*sqrt(p\_l)}{sqrt(p\_u)-sqrt(p\_l)} &&&&&&&&&&&&&&&&&&&&\\
& liquidityAmount1 = \frac{amount1}{sqrt(p\_u)-sqrt(p\_l)} \\
& \\
& \text{If } i\_c < i\_l: deltaL = liquidityAmount0 \\
& \text{If } i\_c > i\_u: deltaL = liquidityAmount1 \\
& \text{If } i\_c \geq i\_l \text{ && } i\_c \leq i\_u: deltaL = min(liquidityAmount0, liquidityAmount1) \\
\end{align*}
$$

#### Multiplier Method

The Multiplier Method applies a multiplier, determined by the intersection of the position price range and the historical price range of the pool to calculate an estimated APR.

In order to estimate the future reward and fee APR, the following is assumed:

- Historical price data is used to extrapolate future price data, practically this is not the best indicator of future price performance but it does help to provide a decent estimate.
- Price fluctuation within the historical price range is consistent in volume across the entire time interval, and resembles a periodic function with an amplitude equalling the magnitude of the upper and lower price boundaries.

We retrieve the following variables:

$$
\begin{align\*}
& u\_{lower} = \text{Lower bound of user's concentrated liquidity price range} &&&&&&&&&&&&&&&&&&&&&\\
& u\_{upper} = \text{Upper bound of user's concentrated liquidity price range} \\
& \\
& h\_{lower} = \text{Lower bound of historical price range across a specific time period} \\
& h\_{upper} = \text{Upper bound of historical price range across a specific time period} \\
& \\
& \text{Where:} \\
& r\_{lower} = max(u\_{lower}, h\_{lower}) \\
& r\_{upper} = min(u\_{upper}, h\_{upper}) \\
\end{align\*}
$$

For ease of understanding, we will denote the following ranges as such:

$$
\begin{align\*}
& userRange = u\_{upper} - u\_{lower} &&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&\\
& histRange = h\_{upper} - h\_{lower} \\
& retroRange = r\_{upper} - r\_{lower} \\
\end{align\*}
$$

*W*here _retroRange_ is the retroactive intersection between _userRange_ and _histRange_

$$
\begin{align\*}
& \text{Let } m = \text{multiplier of reward or fees that user will receive} &&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&\\
& \\
& \text{If } retroRange \leq 0, m = 0 \\
& \\
& \text{If } userRange = retroRange, m = \frac{histRange}{retroRange} \\
& \\
& \text{If } histRange = retroRange, m = \frac{retroRange}{userRange} \\
& \\
& \text{Else } m = \frac{retroRange}{tradeRange} \* \frac{retroRange}{userRange} \\
\end{align\*}
$$
